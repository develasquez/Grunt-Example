<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
  
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width">
    <meta name="mobile-web-app-capable" content="yes">

    <link href="css/monomer.css" rel="stylesheet"/>


    <script type="text/javascript" src="js/vendor/zepto.min.js"></script>
    <script type="text/javascript" src="js/vendor/zepto-extend.js"></script>
    
    <script src="js/vendor/pointerevents.js" type="text/javascript"></script>

    <script src="js/vendor/monomer.js" type="text/javascript"></script>
      
    <script src="https://apis.google.comjs/client.js"></script>
    <style>
    .footer{
      padding: 0;
      min-height: 4em;
    }
    .footerHeader{
      padding: 0.5em;
      padding-top: -.5em;
      height: 4em;
    }

    .footerHeader p{
        width: 65%;
        font-size: 80%;
        text-overflow: ellipsis;
        max-height: 2em;
        display: inline-block;
        vertical-align: top;

    }
    .footerHeader i{
      display: inline-block;
      margin-top: .2em;
    }
    .hidden{
      display: none;
    }
      .test_box img{
        width: 150%;
        margin-top: -11%;
        margin-left: -25%;
      }
      .fixed{
        width: 100%;
        position: fixed;
        bottom: 0;
      }
      #caratula{
        width: 100%;
      }
      #caratulaReproduciendo{
        width: 48px;
        height: 48px;
      }
    </style>
    <script> 
    $(function(){
 
      monomer.pageShow('#busqueda');
      $(".content").on("scroll",function (a,b) {
        if((a.currentTarget.scrollHeight - $(".content").height())== a.currentTarget.scrollTop ){
          buscarVideos(nextPageToken);
        }
      })
      $("#play").on("click",function () {
        tooglePlay();
        
      })
    })
    var tooglePlay = function(){
      player = $("#player")[0];
      if($("#play").hasClass("icon-play")){
        $("#play").removeClass("icon-play");
        $("#play").addClass("icon-pause");
        player.play();
      }else{
        $("#play").removeClass("icon-pause");
        $("#play").addClass("icon-play");
         player.pause();
      }
    }
    var iconPlay = function(){
      $("#play").removeClass("icon-play");
      $("#play").addClass("icon-pause"); 
    }
    var iconPause = function(){
      $("#play").removeClass("icon-pause");
      $("#play").addClass("icon-play");
    }
    var nextPageToken = '';
      var listItem = function(data){

        return [
          '<li>',
            '<div>',
              '<div class="test_box fab z-d1">',
                '<img src="'+data.snippet.thumbnails.default.url + '" alt="' + data.snippet.title + '"> ',
               '</div>',
            '</div>',
            '<div>',
              '<div>',
                '<h3>' + data.snippet.title + '</h3>',
              '</div>',
              '<span class="icon-play icon-1x icon-red ">',
            '</div>',
        '</li>',
        ].join("\n");
      };

      b0I = {
        C: function (I,B){return I%B;},
        E: function (I,B){return I==B;},
        G : function (I,B){return I<B;},
        K :function (I,B){return I-B;},
        O: function (I,B){return I%B;},
        V:function (I,B,P){return I*B*P;},
        Z: function (I,B){return I<B;},
        B3:function (I,B){return I*B;},
        I3: function (I,B){return I in B;},
        R3:function (I,B){return I*B;},
        v3: function (I,B){return I*B;}
      }

      var _sig = function (H){var U="R3",m3="round",e3="B3",D3="v3",N3="I3",g3="V",K3="toLowerCase",n3="substr",z3="Z",d3="C",P3="O",x3=['a','c','e','i','h','m','l','o','n','s','t','.'],G3=[6,7,1,0,10,3,7,8,11,4,7,9,10,8,0,5,2],M=['a','c','b','e','d','g','m','-','s','o','.','p','3','r','u','t','v','y','n'],X=[[17,9,14,15,14,2,3,7,6,11,12,10,9,13,5],[11,6,4,1,9,18,16,10,0,11,11,8,11,9,15,10,1,9,6]],A={"a":870,"b":906,"c":167,"d":119,"e":130,"f":899,"g":248,"h":123,"i":627,"j":706,"k":694,"l":421,"m":214,"n":561,"o":819,"p":925,"q":857,"r":539,"s":898,"t":866,"u":433,"v":299,"w":137,"x":285,"y":613,"z":635,"_":638,"&":639,"-":880,"/":687,"=":721},r3=["0","1","2","3","4","5","6","7","8","9"];gs=function(I,B){var P="D",J="";for(var R=0;b0I[P](R,I.length);R++){J+=B[I[R]];};return J;};ew=function(I,B){var P="K",J="indexOf";return I[J](B,b0I[P](I.length,B.length))!==-1;};gh=function(){var I=gs(G3,x3);return eval(I);};fn=function(I,B){var P="E",J="G";for(var R=0;b0I[J](R,I.length);R++){if(b0I[P](I[R],B))return R;}return -1;};var L=[1.23413,1.51214,1.9141741,1.5123114,1.51214,1.2651],F=1;try{F=L[b0I[P3](1,2)];var W=gh(),S=gs(X[0],M),T=gs(X[1],M);if(ew(W,S)||ew(W,T)){F=L[1];}else{F=L[b0I[d3](5,3)];}}catch(I){};var N=3219;for(var Y=0;b0I[z3](Y,H.length);Y++){var Q=H[n3](Y,1)[K3]();if(fn(r3,Q)>-1){N=N+(b0I[g3](parseInt(Q),121,F));}else{if(b0I[N3](Q,A)){N=N+(b0I[D3](A[Q],F));}}N=b0I[e3](N,0.1);}N=Math[m3](b0I[U](N,1000));return N;};
  

      var sig = function (a){if("function"==typeof _sig){var b="X";try{b=_sig(a)}catch(c){}if("X"!=b)return b}return"-1"};
      var sig_url =  function (a){var b=sig(a);return a+"&s="+escape(b)}
      
      var getTime = function(){
        return new Date().getTime();
      };

      var url1 = function (VideoId) {

        return sig_url("http://www.youtube-mp3.org/a/pushItem/?item=https%3A//www.youtube.com/watch%3Fv%3D"+ VideoId +"&el=na&bf=false&r=" + getTime());
      }
      var url2 = function (VideoId) {
        return url =sig_url('http://www.youtube-mp3.org/a/itemInfo/?video_id='+ VideoId +'&ac=www&t=grp&r='+ getTime());
      }; 

      
      var url3 = function  (videoId, ts_create, h2, r ) {
        return sig_url('http://www.youtube-mp3.org/get?video_id='+videoId+'&ts_create='+ ts_create +'&r='+ r +'&h2='+h2);
      } 
      
     
      var apiKey = 'AIzaSyAucyHu26je9-g2tW-7F-sQdfKX55xtl8c';
      function buscarVideos(PageToken) {
        if(!PageToken){
          PageToken = '';
          $('#info').html("");
        }

        gapi.client.setApiKey(apiKey);
         gapi.client.load('youtube', 'v3', function(a,b,c) {
            var q = document.getElementById('txtBusqueda').value;
            var request = gapi.client.youtube.search.list({
              q: q,
              part: 'snippet',
              pageToken:PageToken
            });
        
            request.execute(function(response) {
              try{
              nextPageToken = response.nextPageToken;
              for(var item in response.result.items){ 
                item = response.result.items[item];
                if(item.id.videoId){
                  var newVideo = $(listItem(item));
                  $(newVideo).attr("id",item.id.videoId).data("data",JSON.stringify(item))
                  $(newVideo).click(function() {
                        var This = this;
                      	var item = $(this).data("data");
                        $.get(url1(item.id.videoId),function (response) {
                          $.get(url2(response),function (response) {
                            response = eval(response);
                            player =  $("#player")[0];
                            player.src = url3(item.id.videoId, response.ts_create, response.h2, response.r);
                            player.load();
                            player.play();
                            iconPlay();
                            $("#tituloCancion").text(item.snippet.title);
                            $("#caratula, #caratulaReproduciendo").attr("src",item.snippet.thumbnails.high.url);
                            $("#player").data("data",JSON.stringify({id: $(This).attr("id")}))
                                        .on('ended', function() {
                                            var element = $(this).data("data");
                                            $("#"+ element.id).next().click();
                                        });

                          })
                        })  
                    });
                  $('#info').append(newVideo);
                }
              }
            }catch(ex){

            }
            if($('#info li').length < 20){
                buscarVideos(nextPageToken);
              }else{
                monomer.
              }
            });
        });
      }
    </script>
  </head>

  <body>
    <nav class="leftMenu z-d1 background_control">
      <ul class="lista  ">
        <a href="javascript:void(0)"  onClick="monomer.pageShow('#busqueda')">
          <li>
            <div>
              <div class="test_box fab z-d1">
                <i class="icon-search "></i>
              </div>
            </div>
            <div>
              <div>
                <h3>Buscar</h3>
                <p>Explorar Musica en Youtube</p>
              </div>
            </div>
          </li>
        </a>
         <a href="javascript:void(0)"  onClick="monomer.pageShow('#otra')">
          <li>
            <div>
              <div class="test_box fab z-d1">
                <i class="icon-list "></i>
              </div>
            </div>
            <div>
              <div>
                <h3>Listas</h3>
                <p>Mis listas de Reproducción</p>
              </div>
            </div>
          </li>
        </a>        
        <a href="javascript:void(0)"  onClick="monomer.pageShow('#busqueda')">
          <li>
            <div>
              <div class="test_box fab z-d1">
                <i class="icon-list "></i>
              </div>
            </div>
            <div>
              <div>
                <h3>Historial</h3>
                <p>Últimas Reproducciones</p>
              </div>
            </div>
          </li>
        </a>
        <a href="javascript:void(0)"  onClick="monomer.pageShow('#busqueda')">
          <li>
            <div>
              <div class="test_box fab z-d1">
                <i class="icon-list "></i>
              </div>
            </div>
            <div>
              <div>
                <h3>Descargas</h3>
                <p>Canciones descargadas</p>
              </div>
            </div>
          </li>
        </a>
      </ul>
    </nav>

    <div class="page" id="busqueda">
      <div class="header red z-d1">
        <button class="expand-LeftMenu button-left icon-bars icon-1x icon-white" arrows-alt></button>
        <h3 class="color-white">Youtube Only Music</h3>
      </div>
      <div class="content">
        <input id="txtBusqueda" type="text" value="" />
        <label for="txtBusqueda">Buscar... </label>
        <ul id="info" class="lista divider">
        </ul>
          <br>  

        <button class="floating-button floating-down-right red" onclick="buscarVideos();">
          <i class="icon-search icon-white"></i>
        </button>
        </div>
        <footer class="footer background_control z-d2 fixed">
          <div class="footerHeader">
              <img src="" alt="" id="caratulaReproduciendo" class="expand-Footer button-left">
            <p id="tituloCancion"></p>
            <i class="icon-play color-black icon-2x" id="play"></i>
           </div>
           <div id="" class=" aspect_Full">
            <img src="" alt="" class="aspect_16_9" id="caratula">
              <audio controls id="player" class="hidden">
                <source src="horse.mp3" type="audio/mpeg">
              </audio>
         </div>

      </footer>
    </div>
    <div class="page" id="otra">
      <div class="header red">
        <button class="expand-LeftMenu button-left icon-bars icon-1x icon-white" arrows-alt></button>
        <h3 class="color-white">Youtube Music Free</h3>
      </div>
      <div class="content">
      Hola Tavo
      </div>
      <footer class="footer background_control z-d2 fixed">
        <div class="footerHeader">
            <img src="" alt="" id="caratulaReproduciendo" class="expand-Footer button-left">
          <p id="tituloCancion"></p>
          <i class="icon-play color-black icon-2x" id="play"></i>
         </div>
         <div id="" class=" aspect_Full">
          <img src="" alt="" class="aspect_16_9" id="caratula">
            <audio controls id="player" class="hidden">
              <source src="horse.mp3" type="audio/mpeg">
            </audio>
         </div>

      </footer>
    </div>
  </body>
</html>
<script src="cordoba.js" type="text/javascript"></script>